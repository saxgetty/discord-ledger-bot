// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Raider {
  id        Int           @id @default(autoincrement())
  discordId String        @unique
  name      String
  entries   LedgerEntry[]
  boes      BoE[]         @relation("Looter")
}

model LedgerEntry {
  id          Int       @id @default(autoincrement())
  raider      Raider    @relation(fields: [raiderId], references: [id])
  raiderId    Int
  item        String
  goldSpent   Int
  paid        Boolean   @default(false)
  dateCreated DateTime  @default(now())
  datePaid    DateTime?
}

// BoE (Bind on Equip) tracking for guild raid drops
model BoE {
  id            Int       @id @default(autoincrement())
  armorType     String    // Plate, Mail, Leather, Cloth, Accessory
  slot          String    // Helm, Boots, Waist, Legs, Chest, etc.
  difficulty    String    // N, H, M (Normal, Heroic, Mythic)
  looter        Raider    @relation("Looter", fields: [looterId], references: [id])
  looterId      Int
  salePrice     Int       // Gold amount sold for
  playerCut     Int       // 20% to player
  guildCut      Int       // 80% to guild
  paid          Boolean   @default(false) // Has player been paid?
  dateAdded     DateTime  @default(now())
  datePaid      DateTime?
  notes         String?
}

